%%{init: {'theme': 'dark', 'themeVariables': { 'primaryColor': '#0de7e7', 'primaryTextColor': '#eeeeee', 'primaryBorderColor': '#2c2d2f', 'lineColor': '#0de7e7', 'secondaryColor': '#c73a52', 'tertiaryColor': '#2c2d2f'}}}%%

flowchart TB
    subgraph Entry["Entry Point"]
        Index["index.html"]
        Main["main.tsx\nRedux Provider"]
        App["App.tsx\nBrowserRouter"]
    end

    subgraph Routing["React Router v6 âœ…"]
        PublicRoutes["Public Routes âœ…\n/ /login /register\n/reset-password"]
        AudienceRoutes["Audience Routes âœ…\n/join /join/:code\n/s/:slug /join/audience"]
        SpeakerRoutes["Speaker Routes âœ…\n/dashboard\n/presentations/:id/edit\n/presentations/:id/settings"]
        PresenterRoutes["Presenter Routes âœ…\n/sessions/:sessionId/present"]
        AdminRoutes["Admin Routes ðŸ”²\n/admin/*"]
    end

    subgraph Pages["Pages - src/pages/"]
        subgraph AuthPages["auth/ âœ…"]
            LoginPage["LoginPage"]
            RegisterPage["RegisterPage"]
            ResetPasswordPage["ResetPasswordPage"]
        end
        subgraph SpeakerPages["speaker/ âœ…"]
            DashboardPage["DashboardPage"]
            ComposerPage["ComposerPage"]
            SettingsPage["PresentationSettingsPage"]
        end
        subgraph PresenterPages["presenter/ âœ…"]
            PresenterPage["PresenterPage\n+ 11 sub-components"]
        end
        subgraph AudiencePages["audience/"]
            JoinPage["JoinPage âœ…"]
            JoinBySlugPage["JoinBySlugPage âœ…"]
            NameEntryPage["NameEntryPage âœ…"]
            WaitingScreen["WaitingScreen âœ…"]
            EndedScreen["EndedScreen âœ…"]
            NotFoundScreen["NotFoundScreen âœ…"]
            AudiencePage["AudiencePage âœ…\n+ 13 sub-components"]
        end
        AdminPages["admin/ ðŸ”²\nNot yet created"]
    end

    subgraph Components["Components - src/components/"]
        subgraph Common["common/ âœ…"]
            ProtectedRoute["ProtectedRoute"]
            ConnectionStatus["ConnectionStatus"]
            QRCode["QRCode"]
        end
        subgraph Composer["composer/ âœ…"]
            SlideEditor["SlideEditor"]
            SlideThumbnail["SlideThumbnail"]
            SlidePreview["SlidePreview"]
            AddSlideDropdown["AddSlideDropdown"]
            PropertiesPanel["PropertiesPanel"]
            SaveStatus["SaveStatusIndicator"]
            Editors["editors/\n5 slide type editors"]
        end
        subgraph Presentations["presentations/ âœ…"]
            PresentationCard["PresentationCard"]
            CreateModal["CreatePresentationModal"]
        end
    end

    subgraph State["Redux Store - src/store/ âœ…"]
        AuthSlice["authSlice âœ…\n+ tests"]
        PresentationsSlice["presentationsSlice âœ…\n+ tests"]
        SlidesSlice["slidesSlice âœ…\n+ tests"]
    end

    subgraph Hooks["Hooks - src/hooks/ âœ…"]
        ReduxHooks["redux.ts\nuseAppDispatch\nuseAppSelector"]
        UseAuth["useAuth.ts"]
        UseWebSocket["useWebSocket.ts\nAuto-reconnect\nPing/pong"]
    end

    subgraph APILayer["API Layer - src/api/ âœ…"]
        Client["client.ts\nAxios + interceptors\nToken refresh"]
        AuthAPI["auth.ts"]
        PresentationsAPI["presentations.ts"]
        SessionsAPI["sessions.ts"]
        SlidesAPI["slides.ts"]
    end

    subgraph External["External"]
        Backend["Backend API\nhttp://localhost:8000"]
        WebSocket["WebSocket Server\nws://localhost:8000"]
    end

    Index --> Main --> App
    App --> Routing
    Routing --> Pages
    Pages --> Components
    Pages --> State
    Pages --> Hooks
    State --> APILayer
    Hooks --> APILayer
    Client -->|HTTP| Backend
    UseWebSocket <-->|WS| WebSocket

    style AudiencePage fill:#0de7e7,stroke:#2c2d2f,color:#2c2d2f
    style AdminPages fill:#2c2d2f,stroke:#666
    style AdminRoutes fill:#2c2d2f,stroke:#666
